<link rel="import" href="/bower_components/polymer/polymer.html">

<dom-module id="crud-classes-list-row">

    <!-- scoped CSS for this element -->
    <style>
        div {
            padding: 4px;
        }

        .selected {
            #background-color: #000;
        }

    </style>

    <template>
        <div>
            <a id="edit_link" href="#"></a>
        </div>
    </template>

    <script>
        var CrudClassesListRow = {
            component: Polymer({
                is: "crud-classes-list-row",

                factoryImpl: function (class_name) {
                    var class_title = crud.getClassTitleByName(class_name);

                    this.$.edit_link.textContent = class_title;
                    this.$.edit_link.dataset.crud_class_name = class_name;
                    this.$.edit_link.onclick = CrudClassesListRow.crudClassOnClick;
                },

                ready: function () {
                    console.log('ready');
                }
            }),

            crudClassOnClick: function () {
                var class_name = $(this).data('crud_class_name');
                this.classList.add('selected');

                var list = new CrudTable.component(class_name);
                var list_element = $(this).parents('crud-classes-list')[0];

                crudClassesList.updateChildren(list_element, list);

                return false;
            }
        };
    </script>

</dom-module>