<link rel="import" href="/bower_components/polymer/polymer.html">

<dom-module id="crud-classes-list">
    <template>
    </template>

    <script>
        /**
         * здесь не используется шаблон, а дочерние элементы добавляются в навигацию напрямую, потому что наличие дополнительных элементов в навигации ломает ее вид
         */
        var crudClassesList = Polymer({
            is: "crud-classes-list",
            crud_main_polymer: null,

            ready: function () {
                for (var class_name in crud.config) {
                     var a = el('a', {class: 'mdl-navigation__link'}, crud.getClassTitleByName(class_name));
                     a.onclick = this.classOnClick.bind(this, class_name);

                    document.querySelector('.mdl-navigation').appendChild(a); // см. камент выше
                }
            },

            classOnClick: function (class_name) {
                var crud_main_polymer = document.querySelector('crud-main');

                var table_polymer = new CrudTable.component(class_name);
                crud_main_polymer.crud_replaceChildren(table_polymer);

                crud_main_polymer.crud_clearContexts();
                crud_main_polymer.crud_updateContext(table_polymer, true);

                return true;
            }

        });
    </script>

</dom-module>