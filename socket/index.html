<!doctype html>
<html>
<head>
    <style>
    </style>
</head>
<body>

<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="/static/crud.js"></script>
<script src="/static/socket.js"></script>
<script src="/static/storage.js"></script>

<script>

    function crudCloseEditor(){
        $('#crud_obj_editor').remove();
        //showObjectsListForClass();
    }

    function crudClassOnClick(){
        var class_name = $(this).data('class_name');
        //alert(class_name);

        showObjectsListForClass(class_name);
    }

    for (var class_name in crud.crud_config){
        //showObjectsListForClass();
        var a_element = $('<a>');
        a_element.text(class_name);
        a_element.data('class_name', class_name);
        a_element.on('click', crudClassOnClick);

        var div_element = $('<div>');
        div_element.append(a_element);

        $('body').append(div_element);

        //$('body').append('<div><a href="#" onclick="crudClassOnClick">' + class_name + '</a></div>');
    }

    function showObjectsListForClass(class_name) {
        socket.emit('objects_list', class_name);
    }

    function getFullIdForObj(obj){
        if (typeof(obj) != 'object'){
            console.error('not object');
            return 'not_object';
        }

        var class_name = obj._class_name;
        var id = obj.id;

        return class_name + '::' + id;
    }

</script>

</body>
</html>